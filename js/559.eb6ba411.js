"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[559],{7559:function(t,e,a){a.r(e),a.d(e,{default:function(){return at}});var o=a(6768);const s={class:"container my-6"},i={class:"row"},r={class:"col-lg-3 d-none d-lg-block sticky-top-customize"},c={class:"d-block d-lg-none"},n={class:"col-lg-9 my-4 py-4"};function l(t,e,a,l,u,d){const g=(0,o.g2)("NavBar"),p=(0,o.g2)("ProductCategoryDesktop"),k=(0,o.g2)("ProductCategoryMobile"),y=(0,o.g2)("ProductList");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(g),e[0]||(e[0]=(0,o.Lk)("div",{class:"py-md-13 py-9 background-position-center background-size-corver",style:{"background-image":"url('https://storage.googleapis.com/vue-course-api.appspot.com/peihanwang-hexschool/1689994083390.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=fbh9MvNqSmL%2Bs8EQ1sukc8Yxip6M03Xj1r81k1C6L5IOsrr3RQLp%2FyNctt%2FSnGmgsE0V8RIKSwrKtspQN0JmEynIvezjrXu2sWKg8kMy7TUAU8VlafwLiUQWBRpYITL6JbUm%2BOc3smTAnJlxNewDMi8DYwdiqJ9DAaZfm2BS9JO9vgXAia%2Bwxd3YxrX%2F4RzJ3zQtdiQvZI4bwaptLgyX0Lir6dwimbzaq8wlRLlnSjU2g%2B286D2yMkjCNKl39Cg%2BZi9wTyHCIlPpf%2FnD3jpZkksFI%2FYunG8EaFvVUREZX4iXTgtaTMoO1fbFXl2wNy1sMAlLyxV8vbvuh535OknYHw%3D%3D')","background-color":"var(--bs-primary)"}},null,-1)),(0,o.Lk)("div",s,[(0,o.Lk)("div",i,[(0,o.Lk)("div",r,[(0,o.bF)(p,{getProducts:d.getProducts,categoryValue:u.categoryValue},null,8,["getProducts","categoryValue"])]),(0,o.Lk)("div",c,[(0,o.bF)(k,{getProducts:d.getProducts,categoryValue:u.categoryValue},null,8,["getProducts","categoryValue"])]),(0,o.Lk)("div",n,[(0,o.bF)(y,{categoryProducts:u.categoryProducts,categoryValue:u.categoryValue,getProducts:d.getProducts,page:u.page,isLoading:u.isLoading,spinnerLoading:u.spinnerLoading},null,8,["categoryProducts","categoryValue","getProducts","page","isLoading","spinnerLoading"])])])])],64)}var u=a(4232);const d={class:"list-group my-4 py-4"};function g(t,e,a,s,i,r){return(0,o.uX)(),(0,o.CE)("ul",d,[(0,o.Lk)("button",{type:"button",class:(0,u.C4)(["list-group-item list-group-item-action",{active:""===a.categoryValue}]),onClick:e[0]||(e[0]=t=>a.getProducts(1))},e[4]||(e[4]=[(0,o.Lk)("li",{class:"list-unstyled"},"全部商品",-1)]),2),(0,o.Lk)("button",{type:"button",class:(0,u.C4)(["list-group-item list-group-item-action",{active:"gacha"===a.categoryValue}]),onClick:e[1]||(e[1]=t=>a.getProducts(1,"gacha"))},e[5]||(e[5]=[(0,o.Lk)("li",{class:"list-unstyled"},"扭蛋系列",-1)]),2),(0,o.Lk)("button",{type:"button",class:(0,u.C4)(["list-group-item list-group-item-action",{active:"doll"===a.categoryValue}]),onClick:e[2]||(e[2]=t=>a.getProducts(1,"doll"))},e[6]||(e[6]=[(0,o.Lk)("li",{class:"list-unstyled"},"公仔收藏",-1)]),2),(0,o.Lk)("button",{type:"button",class:(0,u.C4)(["list-group-item list-group-item-action",{active:"other"===a.categoryValue}]),onClick:e[3]||(e[3]=t=>a.getProducts(1,"other"))},e[7]||(e[7]=[(0,o.Lk)("li",{class:"list-unstyled"},"其他好物",-1)]),2)])}var p={data(){return{}},props:["getProducts","categoryValue"]},k=a(1241);const y=(0,k.A)(p,[["render",g]]);var h=y;function L(t,e,a,s,i,r){return(0,o.uX)(),(0,o.CE)("select",{class:"form-select mb-5 fs-6",name:"product-categories",onChange:e[0]||(e[0]=t=>r.classifyProductsMobile(t))},e[1]||(e[1]=[(0,o.Lk)("option",{value:"",selected:""},"全部商品",-1),(0,o.Lk)("option",{value:"giftBox"},"扭蛋系列",-1),(0,o.Lk)("option",{value:"bathAndBodyProducts"},"公仔收藏",-1),(0,o.Lk)("option",{value:"fragrance"},"其他好物",-1)]),32)}var v={data(){return{}},props:["getProducts","categoryValue"],methods:{classifyProductsMobile(t){const e=t.target.value;this.getProducts(1,e)}}};const P=(0,k.A)(v,[["render",L]]);var m=P;const b={class:"vl-parent",ref:"loading-container"},C={key:0},f={key:1,class:"row g-md-4 g-3"},V={class:"card border-0 h-100 position-relative"},_={class:"position-relative"},x={key:0,class:"position-absolute p-2 bg-pink z-index-4 fs-md-6 fs-7 text-white top-0"},E={key:1,class:"product-sell-out text-center text-white fs-3"},w={class:"img-hidden"},A=["src","alt"],X={class:"my-2"},I={class:"card-title text-black fs-6 mb-1 mt-2"},T={key:0,class:"card-text text-black fs-6 mb-2"},F={key:1,class:"card-text text-black fs-6 mb-2"},$={class:"ms-1 text-decoration-line-through text-secondary"},N=["onClick","disabled"],D={key:0,class:"spinner-border-sm spinner-border",role:"status","aria-hidden":"true"},U={class:"mt-7"};function B(t,e,a,s,i,r){const c=(0,o.g2)("ContainerLoading"),n=(0,o.g2)("RouterLink"),l=(0,o.g2)("PaginationComponent");return(0,o.uX)(),(0,o.CE)("div",b,[(0,o.bF)(c,{isLoading:a.isLoading,container:i.container},null,8,["isLoading","container"]),0===i.localProducts.length?((0,o.uX)(),(0,o.CE)("div",C,e[0]||(e[0]=[(0,o.Lk)("h2",{class:"fs-3 text-secondary text-center mt-10 mb-20"},"很抱歉! 找不到符合的商品",-1)]))):((0,o.uX)(),(0,o.CE)("div",f,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.localProducts,(s=>((0,o.uX)(),(0,o.CE)("div",{key:s.id,class:"col-lg-4 col-6"},[(0,o.Lk)("div",V,[(0,o.bF)(n,{class:"product-link text-decoration-none",to:`/product/${s.id}`},{default:(0,o.k6)((()=>[(0,o.Lk)("div",_,[s.is_hotSale?((0,o.uX)(),(0,o.CE)("span",x,"HOT")):(0,o.Q3)("",!0),0===s.quantity?((0,o.uX)(),(0,o.CE)("div",E," 已售完 ")):(0,o.Q3)("",!0),(0,o.Lk)("div",w,[(0,o.Lk)("img",{class:"rounded-0 img-fluid cover-fit",src:s.imageUrl,alt:s.title,width:"351",height:"320",style:{"background-color":"var(--bs-secondary)"}},null,8,A)])])])),_:2},1032,["to"]),(0,o.Lk)("div",X,[(0,o.Lk)("h3",I,(0,u.v_)(s.title),1),s.origin_price===s.price?((0,o.uX)(),(0,o.CE)("p",T,[(0,o.Lk)("span",null,"NT$"+(0,u.v_)(s.origin_price),1)])):((0,o.uX)(),(0,o.CE)("p",F,[(0,o.Lk)("span",null,"NT$"+(0,u.v_)(s.price),1),(0,o.Lk)("span",$,"NT$"+(0,u.v_)(s.origin_price),1)]))]),(0,o.Lk)("button",{class:"btn btn-outline-primary w-100 mt-auto py-2",type:"button",onClick:e=>t.addToCart(s.id),disabled:0===s.quantity||a.spinnerLoading===s.id},[a.spinnerLoading===s.id?((0,o.uX)(),(0,o.CE)("span",D)):(0,o.Q3)("",!0),e[1]||(e[1]=(0,o.eW)(" 加入購物車 "))],8,N)])])))),128))])),(0,o.Lk)("div",U,[(0,o.bF)(l,{getProducts:a.getProducts,categoryValue:a.categoryValue,page:a.page},null,8,["getProducts","categoryValue","page"])])],512)}var M=a(5130);const R={class:"d-flex justify-content-center"},j={"aria-label":"Page navigation "},z={class:"pagination pagination-sm"},Q=["onClick"];function S(t,e,a,s,i,r){return(0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("nav",j,[(0,o.Lk)("ul",z,[(0,o.Lk)("li",{class:(0,u.C4)(["page-item",{disabled:!a.page.has_pre}])},[(0,o.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,M.D$)((t=>a.getProducts(a.page.current_page-1,a.categoryValue)),["prevent"]))},e[2]||(e[2]=[(0,o.Lk)("span",{"aria-hidden":"true"},[(0,o.Lk)("i",{class:"bi bi-chevron-left"})],-1)]))],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.page.total_pages,(t=>((0,o.uX)(),(0,o.CE)("li",{class:(0,u.C4)(["page-item",{active:t===a.page.current_page}]),key:t+"page"},[(0,o.Lk)("a",{class:"page-link",href:"#",onClick:(0,M.D$)((e=>a.getProducts(t,a.categoryValue)),["prevent"])},(0,u.v_)(t),9,Q)],2)))),128)),(0,o.Lk)("li",{class:(0,u.C4)(["page-item",{disabled:!a.page.has_next}])},[(0,o.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,M.D$)((t=>a.getProducts(a.page.current_page+1,a.categoryValue)),["prevent"]))},e[3]||(e[3]=[(0,o.Lk)("span",{"aria-hidden":"true"},[(0,o.Lk)("i",{class:"bi bi-chevron-right"})],-1)]))],2)])])])}var K={data(){return{}},props:["getProducts","categoryValue","page"]};const O=(0,k.A)(K,[["render",S]]);var q=O,J={data(){return{container:null,localProducts:[],localPagination:{},localIsLoading:!1}},props:["categoryProducts","categoryValue","getProducts","page","isLoading","spinnerLoading"],components:{PaginationComponent:q},mounted(){console.log("📌 ProductList.vue 掛載，開始載入產品..."),this.loadProducts()},methods:{loadProducts(t=1,e=""){this.localIsLoading=!0;const a=`https://vue3-course-api.hexschool.io/v2/api/mordecai-api/products?page=${t}&category=${e}`;console.log("🔍 API 請求 URL:",a),this.$http.get(a).then((t=>{console.log("📢 API 回應:",t.data),t.data.success?(this.localProducts=t.data.products,this.localPagination=t.data.pagination,this.localIsLoading=!1,this.$emit("update-products",this.localProducts,this.localPagination)):(console.error("❌ API 回傳失敗:",t.data.message),this.localIsLoading=!1)})).catch((t=>{console.error("🚨 API 請求錯誤:",t),this.localIsLoading=!1}))}}};const Y=(0,k.A)(J,[["render",B],["__scopeId","data-v-530ebdb6"]]);var H=Y,Z=a(9728);const G={NODE_ENV:"production",VUE_APP_API:"https://vue3-course-api.hexschool.io/",VUE_APP_PATH:"mordecai-api",BASE_URL:"/ToyHaven/"}.VUE_APP_URL,W="mordecai-api";var tt={data(){return{products:[],categoryProducts:[],categoryValue:"",page:{},isLoading:!1,spinnerLoading:null}},components:{ProductCategoryDesktop:h,ProductCategoryMobile:m,ProductList:H,NavBar:Z.A},methods:{getProducts(t=1,e=""){this.isLoading=!0,this.$http.get(`${G}/v2/api/${W}/products?page=${t}&category=${e}`).then((t=>{this.products=t.data.products,this.categoryProducts=this.products,this.categoryValue=e,this.page=t.data.pagination,this.scrollToTop(),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},scrollToTop(){window.scrollTo(0,0)},addToCart(t){this.spinnerLoading=t;const e="https://vue3-course-api.hexschool.io/v2/api/mordecai-api/cart";this.$http.post(e,{data:{product_id:t,qty:1}}).then((t=>{t.data.success?this.$emit("update-cart"):console.error("❌ 加入購物車失敗:",t.data.message)})).catch((t=>{console.error("🚨 API 請求錯誤:",t)})).finally((()=>{this.spinnerLoading=null}))}},mounted(){this.getProducts()}};const et=(0,k.A)(tt,[["render",l]]);var at=et}}]);
//# sourceMappingURL=559.eb6ba411.js.map